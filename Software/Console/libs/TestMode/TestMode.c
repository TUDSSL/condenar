#include "TestMode.h"
#include "Kernel.h"
#include "TimeKeeper.h"
#include "Kernel_Draw.h"
#include "stdlib.h"
#include "math.h"

void TestMode_Update();
void TestMode_Render();


void TestModeEntryPoint(){
    while(!k_getShouldCurrentAppExit()){
        TestMode_Update();
        TestMode_Render();
        
    }
}



void TestMode_Update(){
}


void TestMode_Render(){
    k_input_state state;
    k_GetInput(&state, true);

    k_BeginScreenUpdate();
    k_draw_Clear(K_COLOR_WHITE);   
    k_draw_DrawTextCentered(SCREEN_WIDTH_REAL/2,SCREEN_HEIGHT_REAL/2-4,1,"App: %s", k_getCurrentApp()->name);
    k_draw_DrawCircle(65 ,65,35,K_COLOR_BLACK);
    k_draw_FillCircle(65+ (30*state.joystickX),65- (30*state.joystickY),20,K_COLOR_BLACK);

    k_draw_DrawCircle(255 - 23 ,65,12,K_COLOR_BLACK);    
    if(state.buttonX) k_draw_FillCircle(255 - 23 ,65,8,K_COLOR_BLACK);
    k_draw_DrawCircle(255 + 23 ,65,12,K_COLOR_BLACK);
    if(state.buttonB) k_draw_FillCircle(255 + 23 ,65,8,K_COLOR_BLACK);
    k_draw_DrawCircle(255 ,65 - 23,12,K_COLOR_BLACK);
    if(state.buttonY) k_draw_FillCircle(255 ,65 - 23,8,K_COLOR_BLACK);
    k_draw_DrawCircle(255 ,65 + 23,12,K_COLOR_BLACK);
    if(state.buttonA) k_draw_FillCircle(255 ,65 + 23,8,K_COLOR_BLACK);

    k_draw_DrawRectangle(65 - 20, 7, 40, 12, K_COLOR_BLACK);
    if(state.triggerLeft) k_draw_FillRectangle(65 - 18, 9, 36, 8, K_COLOR_BLACK);

    k_draw_DrawRectangle(255 - 20, 7, 40, 12, K_COLOR_BLACK);
    if(state.triggerRight) k_draw_FillRectangle(255 - 18, 9, 36, 8, K_COLOR_BLACK);

    //k_draw_DrawCircle(160 - 30 ,65,12,K_COLOR_BLACK);    
    //if(state.buttonJoystick) k_draw_FillCircle(160 -30,65,8,K_COLOR_BLACK);

    k_draw_DrawCircle(160 + 30 ,65,12,K_COLOR_BLACK);    
    if(state.buttonPower) k_draw_FillCircle(160 +30,65,8,K_COLOR_BLACK);

    k_EndScreenUpdate(true,true);
}



CHECKPOINT_EXCLUDE_DATA uint8_t TestMode_Icon[] = {
    0xff, 0x00, 0x00, 0x00, 0x07, 0xff, 0xc0, 0xfc, 0x00, 0x00, 0x00, 0x01, 0xff, 0xc0, 0xf8, 0x00, 
	0x00, 0x00, 0x00, 0xff, 0xc0, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xc0, 0xe0, 0xff, 0xff, 0xff, 
	0xf8, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 
	0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 
	0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 
	0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xe0, 0x00, 0x00, 0x3c, 0x3f, 0xc0, 0xe1, 0xc0, 0x00, 0x00, 0x3c, 
	0x3f, 0xc0, 0xe1, 0xe0, 0x00, 0x00, 0x3c, 0x3f, 0xc0, 0xe1, 0xf0, 0x00, 0x00, 0x7c, 0x3f, 0xc0, 
	0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 
	0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xe0, 0x00, 0x00, 
	0x3c, 0x3f, 0xc0, 0xe1, 0xc0, 0x00, 0x00, 0x3c, 0x3f, 0xc0, 0xe1, 0xe0, 0x00, 0x00, 0x3c, 0x3f, 
	0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 
	0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc0, 0xe1, 0xf0, 0x00, 
	0x7f, 0xfc, 0x3f, 0xc0, 0xe1, 0xe0, 0x00, 0x3f, 0xfc, 0x3f, 0xc0, 0xe1, 0xc0, 0x00, 0x1f, 0xfe, 
	0x3f, 0xc0, 0xe1, 0xe0, 0x00, 0x3f, 0xff, 0xff, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xff, 0xfb, 0xc0, 
	0xe1, 0xff, 0xff, 0xff, 0xff, 0xf1, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xff, 0xe1, 0xc0, 0xe1, 0xff, 
	0xff, 0xff, 0xff, 0xc1, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xff, 0xc3, 0xc0, 0xe1, 0xff, 0xff, 0xff, 
	0xff, 0x83, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xff, 0x07, 0xc0, 0xe1, 0xff, 0xff, 0xff, 0xfe, 0x0f, 
	0xc0, 0xe1, 0xff, 0xff, 0x3f, 0xfe, 0x0f, 0xc0, 0xe1, 0xff, 0xfe, 0x1f, 0xfc, 0x1f, 0xc0, 0xe1, 
	0xff, 0xfe, 0x0f, 0xf8, 0x3f, 0xc0, 0xe1, 0xff, 0xff, 0x07, 0xf8, 0x7f, 0xc0, 0xe1, 0xff, 0xff, 
	0x83, 0xf0, 0x7f, 0xc0, 0xe1, 0xff, 0xff, 0xc1, 0xe0, 0xff, 0xc0, 0xe0, 0xff, 0xff, 0xe0, 0xc1, 
	0xff, 0xc0, 0xf0, 0x00, 0x01, 0xf0, 0x01, 0xff, 0xc0, 0xf8, 0x00, 0x00, 0xf8, 0x03, 0xff, 0xc0, 
	0xfc, 0x00, 0x00, 0xfc, 0x07, 0xff, 0xc0, 0xff, 0x00, 0x01, 0xfe, 0x0f, 0xff, 0xc0
};